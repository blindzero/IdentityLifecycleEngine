name: Auto label and assign new issues

on: workflow_dispatch

jobs:
  label_and_assign:
    if: github.event.issue.user.login != 'blindzero'
    runs-on: ubuntu-latest
    permissions:
      issues: write

    steps:
      - name: Add label and assign issue
        uses: actions/github-script@v8
        with:
          script: |
            const issueNumber = context.payload.issue.number;
            const repo = context.repo.repo;
            const owner = context.repo.owner;

            await github.rest.issues.addLabels({
              owner,
              repo,
              issue_number: issueNumber,
              labels: ["new"]
            });

            await github.rest.issues.addAssignees({
              owner,
              repo,
              issue_number: issueNumber,
              assignees: ["blindzero"]
            });
